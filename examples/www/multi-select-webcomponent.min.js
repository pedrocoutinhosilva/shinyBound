!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).MultiselectWebcomponent=e()}(this,(function(){"use strict";class t extends HTMLElement{constructor(){var t,e;super(),this.options=[],this.searchbox=document.createElement("input"),this.dropdown=document.createElement("div"),this.selected=document.createElement("div"),this.buttons=document.createElement("div"),this.querySelectorAll("option").forEach((t=>this.options.push(t.cloneNode(!0)))),this.setValuesOnConstructor(this.getAttribute("value")),this.searchbox.type="text",this.searchbox.className=`msw-searchbox ${this.getAttribute("searchbox")||""}`,this.searchbox.style.flexGrow="1",this.searchbox.style.border="0",this.searchbox.style.outline="none",this.searchbox.addEventListener("keyup",(t=>this.onSearchboxKeyup(t))),this.selected.className=`msw-selected ${this.getAttribute("selected")||""}`,this.selected.style.display="flex",this.selected.style.flexWrap="wrap",this.selected.style.flexGrow="1",this.buttons.style.display="flex",this.dropdown.className=`msw-dropdown ${this.getAttribute("dropdown")||""}`,this.dropdown.style.display="none",this.dropdown.style.width="100%",this.dropdown.style.position="absolute",this.dropdown.style.background="white",this.dropdown.style.zIndex="2",this.dropdown.addEventListener("click",(()=>this.onDropdownClick())),this.style.display="flex",this.style.alignItems="center",this.style.height="max-content",this.innerHTML="",this.appendChild(this.selected),this.appendChild(this.buttons),null===(t=this.parentNode)||void 0===t||t.insertBefore(this.dropdown,this.nextSibling),this.addEventListener("click",(()=>this.onMultiselectClick())),null===(e=this.parentElement)||void 0===e||e.addEventListener("mouseleave",(()=>this.dropdown.style.display="none")),this.searchbox.placeholder=this.getAttribute("placeholder")||"";const s=this.getAttribute("disabled");s&&"false"!==s&&(this.searchbox.disabled=!0),this.build()}set value(t){console.log(t),console.log(this.options);for(const t of this.options)t.selected=!1;if(t&&0!=t.length){for(const e of this.options)t.includes(e.value)&&(e.selected=!0);this.build()}}setValuesOnConstructor(t){if(!t)return;const e=t.split(",");for(const t of this.options)e.includes(t.value)&&(t.selected=!0)}get value(){const t=[];for(const e of this.options)e.selected&&t.push(e.value);return t}set disabled(t){this.setAttribute("disabled",t?"true":"false"),this.searchbox.disabled=t,this.build()}get disabled(){const t=this.getAttribute("disabled");return!(!t||"false"===t)}set placeholder(t){this.setAttribute("placeholder",t),this.searchbox.placeholder=t}get placeholder(){return this.getAttribute("placeholder")}clear(){this.options=[],this.build()}build(){this.selected.innerHTML="",this.dropdown.innerHTML="",this.buttons.innerHTML="";for(const t of this.options)t.selected?this.selected.appendChild(this.buildSelectedItem(t)):this.dropdown.appendChild(this.buildDropdownItem(t));this.selected.appendChild(this.searchbox),""!==this.dropdown.innerHTML&&this.buttons.appendChild(this.buildSelectAllButton()),this.selected.querySelectorAll(".msw-selecteditem").length>0&&this.buttons.appendChild(this.buildClearButton()),this.dispatchEvent(new Event("change"))}buildSelectedItem(t){const e=document.createElement("div");return e.style.userSelect="none",e.style.webkitUserSelect="none",e.className=`msw-selecteditem ${this.getAttribute("selecteditem")||""}`,e.innerHTML=t.textContent,e.dataset.value=t.value,this.disabled||e.addEventListener("click",(t=>this.onSelectedClick(t))),e}buildDropdownItem(t){this.getAttribute("item")&&console.warn('[MultiSelectWebcomponent]: Use of attribute "item" is deprecated - it shall be removed in next versions. Use "dropdownitem" instead.');const e=document.createElement("div");return e.style.userSelect="none",e.style.webkitUserSelect="none",e.className=`msw-dropdownitem ${this.getAttribute("dropdownitem")||this.getAttribute("item")||""}`,e.innerHTML=t.textContent,e.dataset.value=t.value,e.addEventListener("click",(t=>this.onItemClick(t))),e}buildClearButton(){const t=document.createElement("button");t.className=`msw-clearbutton ${this.getAttribute("clearbutton")||""}`;const e=this.getAttribute("clearbuttonspan");if(null==e)t.textContent="C";else{const s=document.createElement("span");s.className=`msw-clearbuttonspan ${e}`,t.appendChild(s)}const s=this.getAttribute("clearbuttontitle");return t.title=s||"Clear Selection",t.addEventListener("click",(t=>this.onClearClick(t))),t.disabled=this.disabled,t}buildSelectAllButton(){const t=document.createElement("button");t.className=`msw-selectallbutton ${this.getAttribute("selectallbutton")||""}`;const e=this.getAttribute("selectallbuttonspan");if(null==e)t.textContent="A";else{const s=document.createElement("span");s.className=`msw-selectallbuttonspan ${e}`,t.appendChild(s)}const s=this.getAttribute("selectallbuttontitle");return t.title=s||"Select All",t.addEventListener("click",(t=>this.onSelectAllClick(t))),t.disabled=this.disabled,t}findOptionByValue(t){for(const e of this.options)if(t===e.value)return e}chooseOption(t){t&&(t.selected=!0),this.searchbox.value="",this.build()}onItemClick(t){this.chooseOption(this.findOptionByValue(t.currentTarget.dataset.value))}onSelectedClick(t){const e=this.findOptionByValue(t.currentTarget.dataset.value);e&&(e.selected=!1),this.build()}onClearClick(t){this.options.forEach((t=>t.selected=!1)),this.build(),this.searchbox.value="",this.searchbox.focus(),t.stopPropagation()}onSelectAllClick(t){this.options.forEach((t=>t.selected=!0)),this.build(),this.dropdown.style.display="none",this.searchbox.value="",this.searchbox.focus(),t.stopPropagation()}onMultiselectClick(){!0!==this.disabled&&(this.dropdown.style.display="block",this.searchbox.focus())}onDropdownClick(){this.searchbox.focus()}onSearchboxKeyup(t){if(("Enter"===t.key||"NumpadEnter"===t.key)&&""!==this.searchbox.value&&this.dropdown.firstChild)return this.chooseOption(this.findOptionByValue(this.dropdown.firstChild.dataset.value)),void this.searchbox.focus();if(this.dropdown.innerHTML="",""===this.searchbox.value)for(const t of this.options)t.selected||this.dropdown.appendChild(this.buildDropdownItem(t));else for(const t of this.options)!t.selected&&t.textContent&&t.textContent.toLocaleUpperCase().indexOf(this.searchbox.value.toLocaleUpperCase())>=0&&this.dropdown.appendChild(this.buildDropdownItem(t));this.dropdown.style.display="block"}}return t}));

window.customElements.define("multi-select", MultiselectWebcomponent);
